{% extends "base.html.twig" %}

{% block content %}
 <div class="dashboard">

      <header class="dashboard-header">
        <h2>Dashboard</h2>
        <button id="logout-button" onclick="handleLogout()" class="logout-btn">Logout</button>
      </header>


      <main class="dashboard-main">
         <button id="logout-button" onclick="handleLogout()" class="logout-second-button">Logout</button>
        <section class="welcome-section">
          <h2>Welcome back, Admin!</h2>
          <p>Here's an overview of your ticket activity today.</p>
        </section>
        <h2>Ticket Statistics</h2>

        {% if statsError %}
          <p class="error-message">{{ statsError }}</p>
        {% endif %}

        <section class="stats-container">
          <div class="stat-card open">
            <h3>{{ openTickets }}</h3>
            <p>Open Tickets</p>
          </div>
          <div class="stat-card in-progress">
            <h3>{{ inProgressTickets }}</h3>
            <p>In Progress</p>
          </div>
          <div class="stat-card closed">
            <h3>{{ resolvedTickets }}</h3>
            <p>Resolved</p>
          </div>
          <div class="stat-card total">
            <h3>{{ totalTickets }}</h3>
            <p>Total Tickets</p>
          </div>    
        </section>

        <section class="actions-container">
          <div class="action-card">
            <h4>Manage Tickets</h4>
            <p>View, edit, or delete existing tickets.</p>
            <button>
              <a href="/ticket-manager" style="color: white; text-decoration: none">Open Manager</a>
            </button>
          </div>
        </section>
      </main>

    </div>

    <script>
      function handleLogout() {
        if (confirm('Are you sure you want to logout?')) {
          window.location.href = '/logout';
        }
      }
    </script>
{% endblock %}